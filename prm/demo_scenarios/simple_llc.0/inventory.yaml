# @Scenario LLC contention:
# 3 redis instances;
# 3 twemcached instances (one big instance with big workload, other two relatively small);
# start cassandra service but no workload to train the model;
# start the cassandra stressor to test the model for cache contention.

application_hosts:
  vars:
    workloads:
      twemcache_mutilate:
        default:
          count: 1
          slo: 1000
          communication_port: 11211
          twemcache:
            env:
              worker_threads: 4
              max_memory: 4096
            resources:
              cpu: 4
              ram: 50
              disk: 50
          mutilate:
            env:
              sli_percentile: 95    # Note: 99 percentile is too sensitive
              threads: 12
              connections: 8     # originally was 1, but that seems to be too small
              warmup_time: 10
              qps: 400000            # that's original value (40k)
            resources:
              cpu: 12
              ram: 10
              disk: 20
      stress_ng:
        default:
          count: 3
          timeout: 60
          stressor: "cache-level=3 --cache"
          slo: inf
          number_workers: 28
          resources:
            cpu: 16
            ram: 50
            disk: 50